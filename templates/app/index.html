{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Online Text Visualizer</title>
  <!-- Include the latest version of Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="{% static 'js/chord_diagram.js' %}"></script>
  
</head>

<style>
  .wrapper {
    width: 100%;
    height: 100%;
    background: 

    /* TODO: animation see https://codepen.io/quasimondo/pen/AZedgK */
      radial-gradient(100% 100% at bottom, #9ca1de 20%, rgba(158, 166, 228, 0.55) 50%, transparent),
      /* linear-gradient(to right, #98e2f7 40%, #ec9aa1), */
      linear-gradient(to left, #ffbb2ab6 30%, #ff828c);
    
    display:flex;
    justify-content:space-around;
    align-items:center;
    flex-direction:column;
    color:#fff;
  }

  .middle-card {
    height: 500px;
    width: 500px;
  }
</style>

<body>
  <div class="wrapper">
    <div class="container d-flex justify-content-center align-items-center vh-100">
      <div class="card middle-card text-center">
        <div class="card-header">
          <!-- Nav tabs -->
          <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="home-tab" data-toggle="tab" href="#data-upload" role="tab" aria-controls="home" aria-selected="true">Insert Data</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="profile-tab" data-toggle="tab" href="#c" role="tab" aria-controls="profile" aria-selected="false">Visualization</a>
            </li>
            <!-- <li class="nav-item">
              <a class="nav-link" id="messages-tab" data-toggle="tab" href="#messages" role="tab" aria-controls="messages" aria-selected="false">Messages</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings" aria-selected="false">Settings</a>
            </li> -->
          </ul>
        </div>
        <div class="card-body">
          <!-- Tab panes -->
          <div class="tab-content">
            <div class="tab-pane active" id="data-upload" role="tabpanel" aria-labelledby="data-upload-tab">
              <form enctype = "multipart/form-data" action = "{% url 'upload_data' %}" method="post">
                {% csrf_token %}
                <input type="file" name="excel" type="submit"/>
                <br><br>
                <div class="text-center">
                    <button class="d-none d-sm-inline-block btn btn-secondary shadow-sm" type="submit">Upload</button>
                </div>
            </form>
            </div>
            <div class="tab-pane" id="visualization" role="tabpanel" aria-labelledby="visualization-tab">
              <div id="my_dataviz"></div>
              <p class="response"></p>
              {% if matrix %}\
              {{ names }}
                <script>
                  let matrix = "{{ matrix }}";
                  console.log(matrix)
                  let names = "{{ names }}";
                    chordDiagram(matrix, names)
                </script>
              {% endif %}
            </div>
            <!-- <div class="tab-pane" id="messages" role="tabpanel" aria-labelledby="messages-tab">...</div>
            <div class="tab-pane" id="settings" role="tabpanel" aria-labelledby="settings-tab">...</div> -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Include the latest version of Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>

</body>
</html>

<script>


// if ($(matrix).length) {
//   console.log('matrix')
// }
// $("#my_dataviz").html(data.matrix);
// $(".response").html(data.names);
// $(".response").show();

</script>
   